# 요구사항 문서

## 1. 회원 관리 (고객)

### 1.1 고객 회원 가입

#### 1.1.1 계정 정보 등록
- **1.1.1.1 이름, 주소, 연락처 입력**
    - **입력 값 유효성 검사 (필수 항목 체크):**
      > 입력 값의 유효성을 검사하여 항목이 누락되지 않도록 합니다.
    - **중복된 이메일 검사:**
      > 이메일은 유니크한 값이기에 중복을 방지해야 합니다.
      > 입력 값이 유효할 경우, 인증 코드 발송을 위해 다음 단계로 진행합니다.
- **1.1.1.2 이메일 인증 과정**
    - 인증 코드 생성 및 전송:
      > 인증 코드의 유효 시간은 N분이며, 해당 시간을 초과하면 인증 코드를 사용할 수 없습니다.
    - 인증 완료 처리:
      > 인증이 완료되면 회원가입을 진행할 수 있습니다.
    - **외부 의존성:**
        - 메일 서버: 이메일 인증 시 사용

#### 1.1.2 비밀번호 생성
- **1.1.2.1 비밀번호 규칙**
    - 비밀번호 규칙 적용 (영문, 숫자 포함):
      > 영문, 숫자를 포함한 규칙을 적용하여 단순한 비밀번호를 방지합니다.
- **1.1.2.2 암호화**
    - Bcrypt 등의 암호화를 사용하여 암호화:
      > 비밀번호는 Bcrypt 등의 암호화를 사용하여 안전하게 저장합니다.

### 1.2 회원 정보 수정

#### 1.2.1 개인정보 수정
- **1.2.1.1 이름 및 주소 변경**
    - 기존 데이터와 비교하여 변경 사항 확인:
      > 이름 및 주소 변경 시 기존 데이터와 비교하여 변경 사항을 확인 후 저장합니다.

#### 1.2.2 연락처 수정
- **1.2.2.1 입력값 유효성 검사**
  > 입력값의 유효성을 검사하여 유효한 연락처로 수정합니다.

### 1.3 회원 탈퇴

#### 1.3.1 탈퇴 요청
- **1.3.1.1 탈퇴 사유 입력**
  > 탈퇴 사유는 선택적으로 입력할 수 있으며, 요청 기록이 되며 처리가 됩니다.

#### 1.3.2 탈퇴 처리
- **1.3.2.1 이용 약관에 따른 보관 정책 확인**
    - 데이터 보관 혹은 삭제 처리:
      > 이용 약관에 따라 데이터가 보관되거나 삭제됩니다.

---

## 2. 로그인

### 2.1 고객 로그인

#### 2.1.1 로그인 요청 처리
- **2.1.1.1 이메일 및 비밀번호 입력**
    - 입력 값 유효성 검사:
      > 이메일 및 비밀번호 입력 값의 유효성을 검사하여 인증 절차를 진행합니다.
- **2.1.1.2 사용자 정보 조회**
    - 비밀번호 비교 및 검증:
      > 로그인 입력 정보가 일치하면 로그인에 성공합니다.

#### 2.1.2 로그인 성공/실패 처리
- **2.1.2.1 성공 시**
    - 세션 생성 또는 JWT 발급:
      > 로그인 입력 정보가 일치하면 로그인에 성공합니다.
      > 로그인 성공 시 세션을 생성하거나 JWT를 발급합니다.
- **2.1.2.2 실패 시**
    - 로그인 실패 메시지 반환:
      > 로그인 실패 시 실패 메시지를 반환합니다.
    - N회 연속 실패 시 계정 잠금 처리 및 메시지 반환:
      > 로그인 N회 연속 실패 시 계정이 잠금 처리되며, 관련 메시지를 반환합니다.

### 2.2 비밀번호 찾기

#### 2.2.1 이메일 인증 요청
- **2.2.1.1 인증 코드 생성 및 전송**
  > 이메일 인증 요청은 회원 가입 시 이메일 인증 과정과 동일합니다.
    - **외부 의존성:**
        - 메일 서버: 이메일 인증 시 사용
- **2.2.1.2 인증 완료 처리**
  > 인증이 완료되면 새로운 비밀번호로 설정할 수 있습니다.

#### 2.2.2 비밀번호 재설정
- **2.2.2.1 새로운 비밀번호 입력**
    - 비밀번호 규칙:
      > 비밀번호 규칙은 회원 가입 시 비밀번호 규칙과 동일합니다.
- **2.2.2.2 암호화**
  > 비밀번호 암호화는 회원 가입 시 암호화와 동일합니다.
  > 재설정한 비밀번호로 로그인이 가능합니다.

---

## 3. 상품 조회

### 3.1 상품 조회 및 검색

#### 3.1.1 상품 검색
- **3.1.1.1 태그 선택 및 필터 적용**
    - 태그로 상품 조회:
      > 태그를 통해 상품을 조회할 수 있습니다.
    - 카테고리별 필터 적용:
      > 카테고리별로 필터를 적용하여 상품을 조회할 수 있습니다.

#### 3.1.2 상품 상세 조회
- **3.1.2.1 상품 기본 정보**
  > 상품의 기본 정보(이미지, 설명 등)를 반환합니다.
- **3.1.2.2 상품 옵션 및 재고 정보 표시**
    - 옵션별 재고 데이터 조회:
      > 해당 상품의 상세한 상품 정보와 재고를 반환합니다.

---

## 4. 장바구니 관리

### 4.1 장바구니 담기

#### 4.1.1 장바구니에 상품 담기
- **4.1.1.1 상품 선택 및 추가**
    - 사용자가 상품을 선택하여 장바구니에 추가:
      > 사용자가 선택한 상품과 옵션을 전달하여 장바구니에 추가합니다.
      > 장바구니에 추가될 때, 기본 수량은 1개로 설정합니다.
    - 수량 선택 기능:
      > 사용자가 수량을 N개씩 담을 수 있도록 선택 옵션을 제공합니다.
      > 사용자가 입력한 수량이 유효하지 않을 경우 오류를 반환합니다.
    - 동일 상품 중복 추가 처리:
      > 동일 상품이 중복으로 담길 경우, 수량만 수정합니다.
- **4.1.1.2 재고 차감**
    - 장바구니 담을 때 재고 차감 여부:
      > 재고를 실시간으로 차감하지 않고, 구매 확정 시점에 차감됩니다.
    - 구매 확정 시 재고 차감:
      > 주문 생성 시, 재고 업데이트를 처리합니다.

---

## 5. 주문 및 결제

### 5.1 장바구니 조회 및 수정

#### 5.1.1 장바구니 상품 목록 조회
- **5.1.1.1 사용자 ID로 장바구니 데이터 조회**
    - 상품별 합계 금액 계산:
      > 해당 사용자의 장바구니를 조회하여 상품별 합계 금액을 나타냅니다.
- **5.1.1.2 상품 세부 정보 반환**
    - 이미지, 옵션, 수량 등 포함:
      > 해당 사용자의 장바구니를 조회하여 상품의 세부 정보를 반환합니다.

#### 5.1.2 상품 수량 수정
- **5.1.2.1 수정 처리**
    - 재고 확인 후 수량 업데이트:
      > 재고 확인 후 수량을 업데이트하며, 수정된 내용이 장바구니에 반영됩니다.
- **외부 의존성**:
    - 푸시 알림:
      > 주문 상태 변경 시 사용자에게 주문 진행 상황 알림 발송.

#### 5.1.3 상품 삭제
- **5.1.3.1 삭제 처리**
    - 장바구니에서 해당 항목 삭제:
      > 장바구니에서 상품 항목 삭제를 누를 경우, 담긴 개수와 상관없이 해당 상품이 장바구니에서 제거됩니다.

---

## 6. 관리자 기능

### 6.1 회원 관리

#### 6.1.1 회원 목록 조회
- **6.1.1.1 필터링 및 검색**
    - 회원 검색 기능:
      > 회원 검색 결과가 필터링 및 검색 키워드에 맞게 반환됩니다.
- **6.1.1.2 회원 상세 정보 확인**
  > 회원의 상세 정보를 확인할 수 있습니다.

#### 6.1.2 회원 관리 작업
- **6.1.2.1 회원 탈퇴 처리**
    - 데이터 보관 혹은 삭제 처리:
      > 회원 탈퇴 요청을 처리하며, 약관에 따라 데이터가 보관되거나 삭제됩니다.

### 6.2 상품 관리

#### 6.2.1 상품 데이터 관리
- **6.2.1.1 상품 등록**
    - 이미지 및 옵션 데이터 업로드:
      > 상품 등록 시 이미지 및 옵션 데이터를 업로드하고 저장합니다.
    - **외부 의존성**:
        - 이미지 저장소: 업로드한 이미지를 저장.
- **6.2.1.2 상품 수정**
    - 기존 데이터 비교 후 업데이트:
      > 기존 데이터와 비교하여 변경 사항을 확인 후 저장합니다.
- **6.2.1.3 상품 삭제**
    - 삭제 요청 검증 후 처리:
      > 삭제 요청은 검증 후 처리되며, soft delete로 복구가 가능합니다.

#### 6.2.2 카테고리 관리
- **6.2.2.1 카테고리 추가/수정**
    - 중복 확인 후 저장:
      > 카테고리를 추가 혹은 수정할 수 있으며, 카테고리명을 중복 확인 후 저장합니다.
- **6.2.2.2 카테고리 삭제**
    - 삭제된 카테고리 처리:
      > 삭제된 카테고리에 속한 상품은 기타 카테고리로 이동됩니다.
